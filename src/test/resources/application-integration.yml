# src/test/resources/application-integration.yml

spring:
  datasource:
    # Testcontainers JDBC URL: 테스트 실행 시 자동으로 Postgres 16 컨테이너를 띄우고 연결합니다.
    url: jdbc:tc:postgresql:16:///payment?TC_TMPFS=/var/lib/postgresql/data:rw&TC_INITSCRIPT=init-integration.sql
    driver-class-name: org.testcontainers.jdbc.ContainerDatabaseDriver
    username: test
    password: test

  jpa:
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    hibernate:
      ddl-auto: create-drop
    defer-datasource-initialization: false
    show-sql: true
    open-in-view: false
    properties:
      hibernate:
        default_schema: payment
        format_sql: true
        jdbc.time_zone: Asia/Seoul

  # (Kafka 통합 테스트는 @EmbeddedKafka/DynamicPropertySource로 덮어쓰므로 여긴 dummy로 둬도 됩니다)
  kafka:
    bootstrap-servers: dummy:0
    jmx:
      enabled: false

  timezone: Asia/Seoul

logging:
  level:
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE

jwt:
  secret: ${JWT_SECRET}

sql:
  init-sign-up-secret-sql: ${INIT_SIGN_UP_SECRET_SQL}
  init-card-register-secret-sql: ${INIT_CARD_REGISTER_SECRET_SQL}

payment:
  request:
    topic: payment.requested.v1
  inicis:
    mid: INIBillTst
    api-key: q9G7rX1pT5vL2cN8
